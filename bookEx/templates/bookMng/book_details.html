<style>
    .rate {
        float: center;
        margin-right:250px;
        margin-bottom:25px;
        height: 80px;
        padding: 0 10px;
    }
    .rate:not(:checked) > input {
        position:absolute;
        top:-9999px;
    }
    .rate:not(:checked) > label {
        width:1em;
        overflow:hidden;
        cursor:pointer;
        font-size:40px;
        color:#ff7a7a;
    }

    /* stores the star value  */
    .rate:not(:checked) > label:before {
        content: 'â˜…';
    }

    /* color of the stars when selected */
    .rate > input:checked ~ label {
        color: #ffc700;
    }

    /* when the mouse is over the star that is not clicked
     have the darkest color */
    .rate:not(:checked) > label:hover,
    .rate:not(:checked) > label:hover ~ label {
        color: #deb217;
    }

    /* when the mouse is over the star that is clicked
     have a darker color */
    .rate > input:checked + label:hover,
    .rate > input:checked + label:hover ~ label,
    .rate > input:checked ~ label:hover,
    .rate > input:checked ~ label:hover ~ label,
    .rate > label:hover ~ input:checked ~ label {
        color: #c59b08;
    }
</style>

{% extends "base.html" %}
{% load static %}

{% block title %}
Book Details
{% endblock title %}

{% block content %}
<h1>Book Details</h1>
<table class="table table-borderless bg-light mt-4">
    <thead class="thead-light">
        <tr>
            <th class="text-center" scope="col">Name</th>
            <th class="text-center" scope="col">Cover</th>
            <th class="text-center" scope="col">Price</th>
            <th class="text-center" scope="col">Web Site</th>
            <th class="text-center" scope="col">Seller</th>
            <th class="text-center" scope="col">Publish Date</th>
            <th class="text-center" scope="col">Add To</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="text-center align-middle">
                {{ book.name }}
            </td>
            <td class="text-center align-middle">
                <img src="{% static book.pic_path %}" width="60" height="90">
            </td>
            <td class="text-center align-middle">
                {{ book.price }}
            </td>
            <td class="text-center align-middle">
                {{ book.web }}
            </td>
            <td class="text-center align-middle">
                {{ book.username }}
            </td>
            <td class="text-center align-middle">
                {{ book.publishdate }}
            </td>
            {% if book.username != request.user %}
            <td class="text-center align-middle">
                {% if book.id not in shopping_cart_ids %}
                <a href="add_to_cart/{{ book.id }}">
                    Shopping Cart
                </a>
                {% endif %}
                <br>
                {% if book.id not in wish_list_ids %}
                <a href="add_to_wish_list/{{ book.id }}">
                    Wish List
                </a>
                {% endif %}
            </td>
            {% endif %}
        </tr>
    </tbody>
</table>

{% if comments %}
    <h3 class="mt-4">Comments Section:</h3>
    <table class="table table-borderless bg-light mt-4">
        <thead class="thead-light">
            <tr>
                <th class="text-center" scope="col">User</th>
                <th class="text-center" scope="col">Comment</th>
                <th class="text-center" scope="col">Posted</th>
            </tr>
        </thead>
        <tbody>
            {% for comment in comments %}
            <tr>
                <td class="text-center align-middle">
                    {{ comment.username }}
                </td>
                <td class="text-center align-middle">
                    {{comment.content}}
                </td>
                <td class="text-center align-middle">
                    {{ comment.publishdate }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

<div class = "row mt-4">
    <div class="col-md-8">
        <form action="" enctype="multipart/form-data" method="post" novalidate>
            {% csrf_token %}
            <label for="id_content">Add Comment: </label>
            <textarea class="form-control" id="id_content" name="content" required></textarea>
            <button type="submit" class="btn btn-primary mt-3">Post</button>
        </form>
    </div>
    <div class="col-md-4">
        <form action="" enctype="multipart/form-data" method="post" novalidate>
            {% csrf_token %}
            <div class="rate row justify-content-center">
                {% for i in ratings %}
                    {% if i == current_rating %}
                        <input type="radio" id="star{{i}}" name="rate" value="{{i}}" checked/>
                    {% else %}
                        <input type="radio" id="star{{i}}" name="rate" value="{{i}}"/>
                    {% endif %}
                    <label for="star{{i}}" title="text"><br>{{i}}</label>
                {% endfor %}
            </div>
            <button type="submit" class="btn btn-primary mt-3">Rate</button>
        </form>
    </div>
</div>

{% endblock content %}